Code structure for CLI is largely inspired by https://github.com/afdaniele/cpk
